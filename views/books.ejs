<!DOCTYPE html>
<html>

<html>
<% include ./partials/head %>

  <body>
    <% include ./partials/navbar %>
      <main>
        <a href='/books'><h1>Books</h1></a>
        <h4><%= books.length %> total</h4>
        <% books.forEach((a)=> { %>
          <img src='<%=a.cover%>' />
          <h5> <%= a.title %> </h5>
          <% a.authors.forEach((author)=>{ %>
            <a href='/authors/<%=author.id%>'>
              <%=author.first + ' ' + author.last %>
            </a>
            <% }) %>
              <p>
                <%= a.description %>
              </p>
              <div class="row">
                <div class- 'col s12 center'>
                  <a class="waves-effect waves-light btn" href="#editbook<%=a.id%>">Edit</a>
                  <a class="waves-effect waves-light btn" href="#deletebook<%=a.id%>">Delete</a>
                </div>
              </div>

              <div id="editbook<%=a.id%>" class="modal">
                <div class="modal-content">
                  <h4>Edit</h4>
                  <form action="/books/<%=a.id%>" class="put_book">
                    <div class="input-field inline">
                      <input name="title" value="<%=a.title%>" id="title<%=a.id%>" type="text" class="validate">
                      <label class="active" for="title<%=a.id%>">Title</label>
                    </div>
                    <div class="input-field inline">
                      <input name="genre" value="<%=a.genre%>" id="genre<%=a.id%>" type="text" class="validate">
                      <label class="active" for="genre<%=a.id%>">Genre</label>
                    </div>
                    <div class="input-field inline">
                      <textarea name="description" id="description<%=a.id%>" type="text" class="materialize-textarea"><%=a.description%> </textarea>
                      <label class="active" for="description<%=a.id%>">Description</label>
                    </div>
                    <div class="input-field inline">
                      <input name="cover" value="<%=a.cover%>" id="cover<%=a.id%>" type="text" class="validate">
                      <label class="active" for="cover<%=a.id%>">Cover Url</label>
                    </div>
                    <div class="modal-footer">
                      <input type="submit" class="modal-action modal-close waves-effect waves-green btn-flat" value="Submit">
                      <a href="#!" class="modal-action modal-close waves-effect waves-green btn-flat">Cancel</a>
                    </div>
                  </form>
                </div>
              </div>

              <div id="deletebook<%=a.id%>" class="modal">
                <div class="modal-content">
                  <h4>Delete</h4>
                  <p>
                    Are you sure you want to delete
                    <%=a.title%>? This cannot be undone.
                  </p>
                </div>

                <div class="modal-footer">
                  <a href="#!" action='/books/<%=a.id%>' class="delete_book modal-action modal-close waves-effect waves-green btn-flat">Delete</a>
                  <a href="#!" class="modal-action modal-close waves-effect waves-green btn-flat">Cancel</a>
                </div>
              </div>
              <% }); %>

                <a class="btn-floating btn-large waves-effect waves-light red" href="/add/book"><i class="material-icons">add</i></a>


      </main>
      <% include ./partials/footer %>
        <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.98.2/js/materialize.min.js"></script>
        <script type="text/javascript" src='../js/reads.js'></script>
  </body>

</html>
